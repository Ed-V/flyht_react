(window["webpackJsonpflyht-test"]=window["webpackJsonpflyht-test"]||[]).push([[0],{141:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),d=a(12),r=a.n(d),o=(a(84),a(85),a(19)),u=a(20),l=a(33),i=a(30),c=a(25),p=a(34),h=a(35),m=a.n(h);m.a.defaults.baseURL="https://flyht-354b.restdb.io/rest/",m.a.defaults.headers.common["x-apikey"]="5d7fa78ffd86cb75861e2350";var S,f,g,b,E,v,y,N,C,O=m.a,w=a(73),P=a.n(w),D=a(74),I=a(18),j=a(26),M=a.n(j),k=a(16),L=a.n(k),F=function(e){return e.children},H=function(e){var t=function(){e.showUpdateModal(e.cid)},a=function(){e.handleDelete(e.cid)};return s.a.createElement(F,null,s.a.createElement(I.b,{id:e.cid,type:"card",data:e.cid},(function(n){var d=n.events,r=n.isActive;return s.a.createElement(I.a,{for:e.cid,alwaysRender:!0,style:"pointer-events: none"},(function(n){var o=n.x,u=n.y,l=n.isDragging;return s.a.createElement(M.a,Object.assign({},d,{style:{position:l&&r?"fixed":"",left:l&&r?o:"",top:l&&r?u:"",zIndex:l&&r?999:"auto"}}),s.a.createElement(M.a.Body,null,s.a.createElement(M.a.Title,null,e.firstName," ",e.lastName),s.a.createElement(M.a.Text,null,s.a.createElement("span",{style:{fontWeight:"bold"}},"Student Id:"),s.a.createElement("br",null),e.studentId,s.a.createElement("br",null),s.a.createElement("span",{style:{fontWeight:"bold"}},"Phone:"),s.a.createElement("br",null),e.phone),s.a.createElement(L.a,{variant:"success",onClick:t},"Edit"),s.a.createElement(L.a,{variant:"danger",onClick:a},"Delete")))}))})))},x=a(76),U=a.n(x),_=a(37),T=a.n(_),A=a(17),B=a(36),q=a.n(B),Z=a(22),W=a.n(Z),R=a(146),z=a(75),J=a(147),G=function(e){return s.a.createElement(W.a,{show:e.show,onHide:e.hideHandler},s.a.createElement(W.a.Header,{closeButton:!0},s.a.createElement(W.a.Title,null,e.title)),s.a.createElement(W.a.Body,null,s.a.createElement("div",null,s.a.createElement(R.a,{className:"mb-3"},s.a.createElement(R.a.Prepend,null,s.a.createElement(R.a.Text,{id:"firstName"},"First Name")),s.a.createElement(z.a,{placeholder:"First name","aria-label":"FirstName","aria-describedby":"firstName",value:e.firstName,onChange:e.handleChange,name:"updateFirstName"})),s.a.createElement(R.a,{className:"mb-3"},s.a.createElement(R.a.Prepend,null,s.a.createElement(R.a.Text,{id:"lastName"},"Last Name")),s.a.createElement(z.a,{placeholder:"Last name","aria-label":"Last name","aria-describedby":"lastName",value:e.lastName,onChange:e.handleChange,name:"updateLastName"})),s.a.createElement(R.a,{className:"mb-3"},s.a.createElement(R.a.Prepend,null,s.a.createElement(R.a.Text,{id:"studentId"},"Student Id")),s.a.createElement(z.a,{placeholder:"Student Id","aria-label":"Student Id","aria-describedby":"studentId",value:e.studentId,onChange:e.handleChange,name:"updateStudentId"})),s.a.createElement(R.a,{className:"mb-3"},s.a.createElement(R.a.Prepend,null,s.a.createElement(R.a.Text,{id:"phone"},"Phone")),s.a.createElement(z.a,{placeholder:"Phone","aria-label":"Phone","aria-describedby":"phone",value:e.phone,onChange:e.handleChange,name:"updatePhone"})),s.a.createElement(J.a.Group,{controlId:"status"},s.a.createElement(J.a.Label,null,"Status"),s.a.createElement(J.a.Control,{as:"select",name:"updateStatus",value:e.status,onChange:e.handleChange},s.a.createElement("option",{value:"active"},"active"),s.a.createElement("option",{value:"delinquent"},"delinquent"),s.a.createElement("option",{value:"dropped"},"dropped"))))),s.a.createElement(W.a.Footer,null,s.a.createElement(L.a,{variant:"secondary",onClick:e.hideHandler},"Close"),s.a.createElement(L.a,{variant:"primary",onClick:e.commitActionHandler},e.buttonText)))},$=Object(A.b)("StudentStore")(S=Object(A.c)(S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value;a.setState(Object(D.a)({},t.name,n))},a.handleSaveChange=function(){a.props.updateStudent(a.state.updateDbId,{status:a.state.updateStatus,FirstName:a.state.updateFirstName,LastName:a.state.updateLastName,StudentId:a.state.updateStudentId,Phone:a.state.updatePhone}),a.handleHideUpdateModel()},a.handleShowUpdateModel=function(e){var t=a.props.StudentStore.student(e);a.setState({updateFirstName:t.FirstName,updateLastName:t.LastName,updateStudentId:t.StudentId,updatePhone:t.Phone,updateStatus:t.status,updateDbId:t._id}),a.setState({showUpdateModal:!0})},a.handleHideUpdateModel=function(){a.setState({showUpdateModal:!1}),a.setState({updateFirstName:"",updateLastName:"",updateStudentId:0,updatePhone:0,updateStatus:"active",updateDbId:""})},a.handleShowCreateModel=function(e){a.setState({showCreateModal:!0})},a.handleHideCreateModel=function(){a.setState({showCreateModal:!1}),a.setState({updateFirstName:"",updateLastName:"",updateStudentId:0,updatePhone:0,updateStatus:"active",updateDbId:""})},a.handleCreate=function(){a.props.createStudent({status:a.state.updateStatus,FirstName:a.state.updateFirstName,LastName:a.state.updateLastName,StudentId:a.state.updateStudentId,Phone:a.state.updatePhone}),a.handleHideCreateModel()},a.handleCardDropActive=function(e){a.props.updateStudent(e,{status:"active"})},a.handleCardDropDel=function(e){a.props.updateStudent(e,{status:"delinquent"})},a.handleCardDropDropped=function(e){a.props.updateStudent(e,{status:"dropped"})},a.handleDelete=function(e){a.props.deleteStudent(e)},a.state={showUpdateModal:!1,showCreateModel:!1,updateFirstName:"",updateLastName:"",updateStudentId:0,updatePhone:0,updateStatus:"active",updateDbId:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement(F,null,s.a.createElement(G,{show:this.state.showUpdateModal,hideHandler:this.handleHideUpdateModel,title:"Update Student",buttonText:"Save Changes",firstName:this.state.updateFirstName,lastName:this.state.updateLastName,studentId:this.state.updateStudentId,phone:this.state.updatePhone,handleChange:this.handleInputChange,status:this.state.updateStatus,commitActionHandler:this.handleSaveChange}),s.a.createElement(G,{show:this.state.showCreateModal,hideHandler:this.handleHideCreateModel,title:"Create Student",buttonText:"Create Student",firstName:this.state.updateFirstName,lastName:this.state.updateLastName,studentId:this.state.updateStudentId,phone:this.state.updatePhone,handleChange:this.handleInputChange,status:this.state.updateStatus,commitActionHandler:this.handleCreate}),s.a.createElement(U.a,null,s.a.createElement(T.a,null,s.a.createElement(I.c,{accepts:"card",onDrop:this.handleCardDropActive},(function(e){return s.a.createElement("div",Object.assign({},e.events,{className:q.a.dropZone}),s.a.createElement("h1",null,"Active"),s.a.createElement("p",null,"Drop card here"))})),this.props.StudentStore.activeStudents.map((function(t){return s.a.createElement(H,{cid:t._id,key:t._id,firstName:t.FirstName,lastName:t.LastName,studentId:t.StudentId,phone:t.Phone,showUpdateModal:e.handleShowUpdateModel,handleDelete:e.handleDelete})}))),s.a.createElement(T.a,null,s.a.createElement(I.c,{accepts:"card",onDrop:this.handleCardDropDel},(function(e){return s.a.createElement("div",Object.assign({},e.events,{className:q.a.dropZone}),s.a.createElement("h1",null,"Delinquent"),s.a.createElement("p",null,"Drop card here"))})),this.props.StudentStore.delStudents.map((function(t){return s.a.createElement(H,{cid:t._id,key:t._id,firstName:t.FirstName,lastName:t.LastName,studentId:t.StudentId,phone:t.Phone,showUpdateModal:e.handleShowUpdateModel,handleDelete:e.handleDelete})}))),s.a.createElement(T.a,null,s.a.createElement(I.c,{accepts:"card",onDrop:this.handleCardDropDropped},(function(e){return s.a.createElement("div",Object.assign({},e.events,{className:q.a.dropZone}),s.a.createElement("h1",null,"Dropped"),s.a.createElement("p",null,"Drop card here"))})),this.props.StudentStore.dropStudents.map((function(t){return s.a.createElement(H,{cid:t._id,key:t._id,firstName:t.FirstName,lastName:t.LastName,studentId:t.StudentId,phone:t.Phone,showUpdateModal:e.handleShowUpdateModel,handleDelete:e.handleDelete})})))),s.a.createElement(L.a,{onClick:this.handleShowCreateModel},"Create Student"))}}]),t}(s.a.Component))||S)||S,K=a(43),Q=a.n(K),V=a(27),X=a.n(V),Y=Object(A.b)("StudentStore")(f=Object(A.c)(f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).updateStudent=function(e,t){a.setState({loadingMessage:!0});var n=Object(c.a)(a);O.put("students/"+e,t).then((function(t){n.props.StudentStore.updateStudent(e,t.data),a.setState({loadingMessage:!1})})).catch((function(e){a.setState({errorMessage:!0}),console.log(e)}))},a.createStudent=function(e){a.setState({loadingMessage:!0});var t=Object(c.a)(a);O.post("students",e).then((function(e){t.props.StudentStore.addStudent(e.data),a.setState({loadingMessage:!1})})).catch((function(e){a.setState({errorMessage:!0}),console.log(e)}))},a.deleteStudent=function(e){a.setState({loadingMessage:!0}),O.delete("students/"+e).then((function(e){a.fetchStudents(),a.setState({loadingMessage:!1})})).catch((function(e){a.setState({errorMessage:!0}),console.log(e)}))},a.fetchStudents=function(e){a.setState({loadingMessage:!0}),O.get("students",{params:{max:a.state.limit,skip:a.state.limit*e,totals:!0}}).then((function(t){a.props.StudentStore.resetStudents(),a.props.StudentStore.setStudents(t.data.data),a.setState({selectedPage:e}),a.setState({studentTotal:t.data.totals.count}),a.calcPaginationPages(),a.setState({loadingMessage:!1})})).catch((function(e){a.setState({errorMessage:!0}),console.log(e)}))},a.paginationClickHandler=function(e){a.fetchStudents(e.selected)},a.state={studentTotal:0,limit:10,pageCount:1,selectedPage:0,initialPage:0,loadingMessage:!1,errorMessage:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetchStudents()}},{key:"calcPaginationPages",value:function(){var e=Math.ceil(this.state.studentTotal/this.state.limit);0===e&&(e=1),this.setState({pageCount:e})}},{key:"render",value:function(){this.props.StudentStore;return s.a.createElement(Q.a,null,s.a.createElement(X.a,{variant:"primary",show:this.state.loadingMessage},s.a.createElement(X.a.Heading,null,"Communicating..."),s.a.createElement("p",null,"Communicating with server, please be patient.....")),s.a.createElement(X.a,{variant:"danger",show:this.state.errorMessage},s.a.createElement(X.a.Heading,null,"Something Bad Happened"),s.a.createElement("p",null,"Please contact IT for more information")),s.a.createElement($,{updateStudent:this.updateStudent,createStudent:this.createStudent,deleteStudent:this.deleteStudent}),s.a.createElement("nav",{className:"page"},s.a.createElement(P.a,{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",breakClassName:"break-me",pageCount:this.state.pageCount,marginPagesDisplayed:2,pageRangeDisplayed:5,containerClassName:"pagination justify-content-center",activeClassName:"active",pageClassName:"page-item",pageLinkClassName:"page-link",previousLinkClassName:"page-link",nextLinkClassName:"page-link",initialPage:this.state.initialPage,onPageChange:this.paginationClickHandler})))}}]),t}(s.a.Component))||f)||f,ee=a(77),te=a(14),ae=(a(140),a(1)),ne=a(78),se=new(g=ae.f.bound,b=ae.f.bound,E=ae.f.bound,v=ae.f.bound,y=ae.f.bound,N=function(){function e(){Object(o.a)(this,e),Object(ee.a)(this,"students",C,this),this.student=Object(ne.a)((function(e){return this.students.find((function(t){return t._id===e}))}))}return Object(u.a)(e,[{key:"resetStudents",value:function(){this.students.splice(0,this.students.length)}},{key:"setStudents",value:function(e){this.students=e}},{key:"setStudentStatus",value:function(e,t){this.students.find((function(t){return t._id===e})).status=t}},{key:"addStudent",value:function(e){this.students.push({StudentId:e.StudentId,FirstName:e.FirstName,LastName:e.LastName,Phone:e.Phone,status:e.status,_id:e._id})}},{key:"updateStudent",value:function(e,t){var a=this.students.find((function(t){return t._id===e}));a.StudentId=t.StudentId,a.FirstName=t.FirstName,a.LastName=t.LastName,a.Phone=t.Phone,a.status=t.status}},{key:"activeStudents",get:function(){return this.students.filter((function(e){return"active"===e.status}))}},{key:"delStudents",get:function(){return this.students.filter((function(e){return"delinquent"===e.status}))}},{key:"dropStudents",get:function(){return this.students.filter((function(e){return"dropped"===e.status}))}}]),e}(),C=Object(te.a)(N.prototype,"students",[ae.w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(te.a)(N.prototype,"resetStudents",[g],Object.getOwnPropertyDescriptor(N.prototype,"resetStudents"),N.prototype),Object(te.a)(N.prototype,"setStudents",[b],Object.getOwnPropertyDescriptor(N.prototype,"setStudents"),N.prototype),Object(te.a)(N.prototype,"setStudentStatus",[E],Object.getOwnPropertyDescriptor(N.prototype,"setStudentStatus"),N.prototype),Object(te.a)(N.prototype,"addStudent",[v],Object.getOwnPropertyDescriptor(N.prototype,"addStudent"),N.prototype),Object(te.a)(N.prototype,"updateStudent",[y],Object.getOwnPropertyDescriptor(N.prototype,"updateStudent"),N.prototype),Object(te.a)(N.prototype,"activeStudents",[ae.h],Object.getOwnPropertyDescriptor(N.prototype,"activeStudents"),N.prototype),Object(te.a)(N.prototype,"delStudents",[ae.h],Object.getOwnPropertyDescriptor(N.prototype,"delStudents"),N.prototype),Object(te.a)(N.prototype,"dropStudents",[ae.h],Object.getOwnPropertyDescriptor(N.prototype,"dropStudents"),N.prototype),N),de=s.a.createElement(A.a,{StudentStore:se},s.a.createElement("div",{className:"App"},s.a.createElement(Y,null)));var re=function(){return de};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},36:function(e,t,a){e.exports={dropZone:"DisplayListStyles_dropZone__Nd4fv"}},79:function(e,t,a){e.exports=a(141)},84:function(e,t,a){},85:function(e,t,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.7c5cada8.chunk.js.map