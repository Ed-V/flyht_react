(window["webpackJsonpflyht-test"]=window["webpackJsonpflyht-test"]||[]).push([[0],{148:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(13),d=a.n(r),o=(a(88),a(89),a(19)),i=a.n(o),l=a(36),u=a(21),c=a(22),p=a(34),h=a(31),m=a(27),S=a(35),f=a(37),g=a.n(f);g.a.defaults.baseURL="https://flyht-354b.restdb.io/rest/",g.a.defaults.headers.common["x-apikey"]="5d7fa78ffd86cb75861e2350";var b,E,v,y,N,C,P,w,O,k=g.a,j=a(76),D=a.n(j),I=a(77),M=a(18),L=a(28),x=a.n(L),F=a(16),H=a.n(F),U=function(e){return e.children},T=function(e){var t=function(){e.showUpdateModal(e.cid)},a=function(){e.handleDelete(e.cid)};return s.a.createElement(U,null,s.a.createElement(M.b,{id:e.cid,type:"card",data:e.cid},(function(n){var r=n.events,d=n.isActive;return s.a.createElement(M.a,{for:e.cid,alwaysRender:!0,style:"pointer-events: none"},(function(n){var o=n.x,i=n.y,l=n.isDragging;return s.a.createElement(x.a,Object.assign({},r,{style:{position:l&&d?"fixed":"",left:l&&d?o:"",top:l&&d?i:"",zIndex:l&&d?999:"auto"}}),s.a.createElement(x.a.Body,null,s.a.createElement(x.a.Title,null,e.firstName," ",e.lastName),s.a.createElement(x.a.Text,null,s.a.createElement("span",{style:{fontWeight:"bold"}},"Student Id:"),s.a.createElement("br",null),e.studentId,s.a.createElement("br",null),s.a.createElement("span",{style:{fontWeight:"bold"}},"Phone:"),s.a.createElement("br",null),e.phone),s.a.createElement(H.a,{variant:"success",onClick:t},"Edit"),s.a.createElement(H.a,{variant:"danger",onClick:a},"Delete")))}))})))},_=a(79),A=a.n(_),B=a(39),q=a.n(B),Z=a(17),W=a(38),R=a.n(W),z=a(24),J=a.n(z),G=a(153),K=a(78),$=a(154),Q=function(e){return s.a.createElement(J.a,{show:e.show,onHide:e.hideHandler},s.a.createElement(J.a.Header,{closeButton:!0},s.a.createElement(J.a.Title,null,e.title)),s.a.createElement(J.a.Body,null,s.a.createElement("div",null,s.a.createElement(G.a,{className:"mb-3"},s.a.createElement(G.a.Prepend,null,s.a.createElement(G.a.Text,{id:"firstName"},"First Name")),s.a.createElement(K.a,{placeholder:"First name","aria-label":"FirstName","aria-describedby":"firstName",value:e.firstName,onChange:e.handleChange,name:"updateFirstName"})),s.a.createElement(G.a,{className:"mb-3"},s.a.createElement(G.a.Prepend,null,s.a.createElement(G.a.Text,{id:"lastName"},"Last Name")),s.a.createElement(K.a,{placeholder:"Last name","aria-label":"Last name","aria-describedby":"lastName",value:e.lastName,onChange:e.handleChange,name:"updateLastName"})),s.a.createElement(G.a,{className:"mb-3"},s.a.createElement(G.a.Prepend,null,s.a.createElement(G.a.Text,{id:"studentId"},"Student Id")),s.a.createElement(K.a,{placeholder:"Student Id","aria-label":"Student Id","aria-describedby":"studentId",value:e.studentId,onChange:e.handleChange,name:"updateStudentId"})),s.a.createElement(G.a,{className:"mb-3"},s.a.createElement(G.a.Prepend,null,s.a.createElement(G.a.Text,{id:"phone"},"Phone")),s.a.createElement(K.a,{placeholder:"Phone","aria-label":"Phone","aria-describedby":"phone",value:e.phone,onChange:e.handleChange,name:"updatePhone"})),s.a.createElement($.a.Group,{controlId:"status"},s.a.createElement($.a.Label,null,"Status"),s.a.createElement($.a.Control,{as:"select",name:"updateStatus",value:e.status,onChange:e.handleChange},s.a.createElement("option",{value:"active"},"active"),s.a.createElement("option",{value:"delinquent"},"delinquent"),s.a.createElement("option",{value:"dropped"},"dropped"))))),s.a.createElement(J.a.Footer,null,s.a.createElement(H.a,{variant:"secondary",onClick:e.hideHandler},"Close"),s.a.createElement(H.a,{variant:"primary",onClick:e.commitActionHandler},e.buttonText)))},V=a(80),X=a.n(V),Y=a(40),ee=a.n(Y),te=Object(Z.b)("StudentStore")(b=Object(Z.c)(b=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value;a.setState(Object(I.a)({},t.name,n))},a.handleSaveChange=function(){a.props.updateStudent(a.state.updateDbId,{status:a.state.updateStatus,FirstName:a.state.updateFirstName,LastName:a.state.updateLastName,StudentId:a.state.updateStudentId,Phone:a.state.updatePhone}),a.handleHideUpdateModel()},a.handleShowUpdateModel=function(e){var t=a.props.StudentStore.student(e);a.setState({updateFirstName:t.FirstName,updateLastName:t.LastName,updateStudentId:t.StudentId,updatePhone:t.Phone,updateStatus:t.status,updateDbId:t._id}),a.setState({showUpdateModal:!0})},a.handleHideUpdateModel=function(){a.setState({showUpdateModal:!1}),a.setState({updateFirstName:"",updateLastName:"",updateStudentId:0,updatePhone:0,updateStatus:"active",updateDbId:""})},a.handleShowCreateModel=function(e){a.setState({showCreateModal:!0})},a.handleHideCreateModel=function(){a.setState({showCreateModal:!1}),a.setState({updateFirstName:"",updateLastName:"",updateStudentId:0,updatePhone:0,updateStatus:"active",updateDbId:""})},a.handleCreate=function(){a.props.createStudent({status:a.state.updateStatus,FirstName:a.state.updateFirstName,LastName:a.state.updateLastName,StudentId:a.state.updateStudentId,Phone:a.state.updatePhone}),a.handleHideCreateModel()},a.handleCardDropActive=function(e){a.props.updateStudent(e,{status:"active"})},a.handleCardDropDel=function(e){a.props.updateStudent(e,{status:"delinquent"})},a.handleCardDropDropped=function(e){a.props.updateStudent(e,{status:"dropped"})},a.handleDelete=function(e){a.props.deleteStudent(e)},a.state={showUpdateModal:!1,showCreateModel:!1,updateFirstName:"",updateLastName:"",updateStudentId:0,updatePhone:0,updateStatus:"active",updateDbId:""},a}return Object(S.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement(U,null,s.a.createElement(Q,{show:this.state.showUpdateModal,hideHandler:this.handleHideUpdateModel,title:"Update Student",buttonText:"Save Changes",firstName:this.state.updateFirstName,lastName:this.state.updateLastName,studentId:this.state.updateStudentId,phone:this.state.updatePhone,handleChange:this.handleInputChange,status:this.state.updateStatus,commitActionHandler:this.handleSaveChange}),s.a.createElement(Q,{show:this.state.showCreateModal,hideHandler:this.handleHideCreateModel,title:"Create Student",buttonText:"Create Student",firstName:this.state.updateFirstName,lastName:this.state.updateLastName,studentId:this.state.updateStudentId,phone:this.state.updatePhone,handleChange:this.handleInputChange,status:this.state.updateStatus,commitActionHandler:this.handleCreate}),s.a.createElement(A.a,null,s.a.createElement(q.a,null,s.a.createElement(M.c,{accepts:"card",onDrop:this.handleCardDropActive},(function(e){return s.a.createElement("div",Object.assign({},e.events,{className:R.a.dropZone}),s.a.createElement("h1",null,"Active"),s.a.createElement("p",null,"Drop card here"))})),this.props.StudentStore.activeStudents.map((function(t){return s.a.createElement(T,{cid:t._id,key:t._id,firstName:t.FirstName,lastName:t.LastName,studentId:t.StudentId,phone:t.Phone,showUpdateModal:e.handleShowUpdateModel,handleDelete:e.handleDelete})}))),s.a.createElement(q.a,null,s.a.createElement(M.c,{accepts:"card",onDrop:this.handleCardDropDel},(function(e){return s.a.createElement("div",Object.assign({},e.events,{className:R.a.dropZone}),s.a.createElement("h1",null,"Delinquent"),s.a.createElement("p",null,"Drop card here"))})),this.props.StudentStore.delStudents.map((function(t){return s.a.createElement(T,{cid:t._id,key:t._id,firstName:t.FirstName,lastName:t.LastName,studentId:t.StudentId,phone:t.Phone,showUpdateModal:e.handleShowUpdateModel,handleDelete:e.handleDelete})}))),s.a.createElement(q.a,null,s.a.createElement(M.c,{accepts:"card",onDrop:this.handleCardDropDropped},(function(e){return s.a.createElement("div",Object.assign({},e.events,{className:R.a.dropZone}),s.a.createElement("h1",null,"Dropped"),s.a.createElement("p",null,"Drop card here"))})),this.props.StudentStore.dropStudents.map((function(t){return s.a.createElement(T,{cid:t._id,key:t._id,firstName:t.FirstName,lastName:t.LastName,studentId:t.StudentId,phone:t.Phone,showUpdateModal:e.handleShowUpdateModel,handleDelete:e.handleDelete})})))),s.a.createElement(ee.a,{className:"mb-3"},s.a.createElement(ee.a.Prepend,null,s.a.createElement(ee.a.Text,{id:"studentLimit"},"Limit(Press Enter)")),s.a.createElement(X.a,{placeholder:"limit","aria-label":"limit","aria-describedby":"limit",value:this.props.limit,onChange:this.props.handleLimitChange,onKeyPress:this.props.handleLimitEnter,name:"limit"})),s.a.createElement(H.a,{onClick:this.handleShowCreateModel},"Create Student"))}}]),t}(s.a.Component))||b)||b,ae=a(47),ne=a.n(ae),se=a(29),re=a.n(se),de=Object(Z.b)("StudentStore")(E=Object(Z.c)(E=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleLimitChange=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,s="checkbox"===n.type?n.checked:n.value,e.next=4,a.setStateAsync({limit:s});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleLimitEnter=function(e){"Enter"===e.key&&a.fetchStudents(a.state.selectedPage)},a.updateStudent=function(e,t){a.setState({loadingMessage:!0});var n=Object(m.a)(a);k.put("students/"+e,t).then((function(t){n.props.StudentStore.updateStudent(e,t.data),a.setState({loadingMessage:!1})})).catch((function(e){a.setState({errorMessage:!0}),console.log(e)}))},a.createStudent=function(e){a.setState({loadingMessage:!0});var t=Object(m.a)(a);k.post("students",e).then((function(e){a.props.StudentStore.students.length<10&&t.props.StudentStore.addStudent(e.data),a.setState({loadingMessage:!1})})).catch((function(e){a.setState({errorMessage:!0}),console.log(e)}))},a.deleteStudent=function(e){a.setState({loadingMessage:!0}),k.delete("students/"+e).then((function(e){a.fetchStudents(),a.setState({loadingMessage:!1})})).catch((function(e){a.setState({errorMessage:!0}),console.log(e)}))},a.fetchStudents=function(e){a.setState({loadingMessage:!0}),k.get("students",{params:{max:a.state.limit,skip:a.state.limit*e>a.state.studentTotal?0:a.state.limit*e,totals:!0}}).then(function(){var t=Object(l.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.props.StudentStore.resetStudents(),a.props.StudentStore.setStudents(n.data.data),a.calcPaginationPages(),console.log(e),!(a.state.pageCount<a.state.selectedPage)){t.next=9;break}return t.next=7,a.setStateAsync({selectedPage:0});case 7:t.next=11;break;case 9:return t.next=11,a.setStateAsync({selectedPage:e});case 11:return t.next=13,a.setState({studentTotal:n.data.totals.total});case 13:a.setState({loadingMessage:!1});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){a.setState({errorMessage:!0}),console.log(e)}))},a.paginationClickHandler=function(e){a.fetchStudents(e.selected)},a.state={studentTotal:0,limit:10,pageCount:1,selectedPage:0,initialPage:0,loadingMessage:!1,errorMessage:!1},a}return Object(S.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchStudents(this.state.initialPage)}},{key:"setStateAsync",value:function(e){var t=this;return new Promise((function(a){t.setState(e,a)}))}},{key:"calcPaginationPages",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0===(t=Math.ceil(this.state.studentTotal/this.state.limit))&&(t=1),e.next=4,this.setStateAsync({pageCount:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){this.props.StudentStore;return s.a.createElement(ne.a,null,s.a.createElement(re.a,{variant:"primary",show:this.state.loadingMessage},s.a.createElement(re.a.Heading,null,"Communicating..."),s.a.createElement("p",null,"Communicating with server, please be patient.....")),s.a.createElement(re.a,{variant:"danger",show:this.state.errorMessage},s.a.createElement(re.a.Heading,null,"Something Bad Happened"),s.a.createElement("p",null,"Please contact IT for more information")),s.a.createElement(te,{updateStudent:this.updateStudent,createStudent:this.createStudent,deleteStudent:this.deleteStudent,limit:this.state.limit,handleLimitChange:this.handleLimitChange,handleLimitEnter:this.handleLimitEnter}),s.a.createElement("nav",{className:"page"},s.a.createElement(D.a,{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",breakClassName:"break-me",pageCount:this.state.pageCount,marginPagesDisplayed:2,pageRangeDisplayed:5,forcePage:this.state.selectedPage,containerClassName:"pagination justify-content-center",activeClassName:"active",pageClassName:"page-item",pageLinkClassName:"page-link",previousLinkClassName:"page-link",nextLinkClassName:"page-link",initialPage:this.state.initialPage,onPageChange:this.paginationClickHandler})))}}]),t}(s.a.Component))||E)||E,oe=a(81),ie=a(14),le=(a(147),a(1)),ue=a(82),ce=new(v=le.f.bound,y=le.f.bound,N=le.f.bound,C=le.f.bound,P=le.f.bound,w=function(){function e(){Object(u.a)(this,e),Object(oe.a)(this,"students",O,this),this.student=Object(ue.a)((function(e){return this.students.find((function(t){return t._id===e}))}))}return Object(c.a)(e,[{key:"resetStudents",value:function(){this.students.splice(0,this.students.length)}},{key:"setStudents",value:function(e){this.students=e}},{key:"setStudentStatus",value:function(e,t){this.students.find((function(t){return t._id===e})).status=t}},{key:"addStudent",value:function(e){this.students.push({StudentId:e.StudentId,FirstName:e.FirstName,LastName:e.LastName,Phone:e.Phone,status:e.status,_id:e._id})}},{key:"updateStudent",value:function(e,t){var a=this.students.find((function(t){return t._id===e}));a.StudentId=t.StudentId,a.FirstName=t.FirstName,a.LastName=t.LastName,a.Phone=t.Phone,a.status=t.status}},{key:"activeStudents",get:function(){return this.students.filter((function(e){return"active"===e.status}))}},{key:"delStudents",get:function(){return this.students.filter((function(e){return"delinquent"===e.status}))}},{key:"dropStudents",get:function(){return this.students.filter((function(e){return"dropped"===e.status}))}}]),e}(),O=Object(ie.a)(w.prototype,"students",[le.w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(ie.a)(w.prototype,"resetStudents",[v],Object.getOwnPropertyDescriptor(w.prototype,"resetStudents"),w.prototype),Object(ie.a)(w.prototype,"setStudents",[y],Object.getOwnPropertyDescriptor(w.prototype,"setStudents"),w.prototype),Object(ie.a)(w.prototype,"setStudentStatus",[N],Object.getOwnPropertyDescriptor(w.prototype,"setStudentStatus"),w.prototype),Object(ie.a)(w.prototype,"addStudent",[C],Object.getOwnPropertyDescriptor(w.prototype,"addStudent"),w.prototype),Object(ie.a)(w.prototype,"updateStudent",[P],Object.getOwnPropertyDescriptor(w.prototype,"updateStudent"),w.prototype),Object(ie.a)(w.prototype,"activeStudents",[le.h],Object.getOwnPropertyDescriptor(w.prototype,"activeStudents"),w.prototype),Object(ie.a)(w.prototype,"delStudents",[le.h],Object.getOwnPropertyDescriptor(w.prototype,"delStudents"),w.prototype),Object(ie.a)(w.prototype,"dropStudents",[le.h],Object.getOwnPropertyDescriptor(w.prototype,"dropStudents"),w.prototype),w),pe=s.a.createElement(Z.a,{StudentStore:ce},s.a.createElement("div",{className:"App"},s.a.createElement(de,null)));var he=function(){return pe};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(s.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},38:function(e,t,a){e.exports={dropZone:"DisplayListStyles_dropZone__Nd4fv"}},83:function(e,t,a){e.exports=a(148)},88:function(e,t,a){},89:function(e,t,a){}},[[83,1,2]]]);
//# sourceMappingURL=main.7be0a533.chunk.js.map